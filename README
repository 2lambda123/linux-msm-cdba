= CDBA control tool
The CDBA control tool is used for remotely booting images on development boards
attached using a CDB Assist [https://github.com/sonyxperiadev/CDB-Assist] or Conmux.

= Dependencies
sudo apt-get install libudev-dev libyaml-dev for debian systems
dnf install systemd-devel libyaml-devel for fedora systems

= Device side
On the host with the CDB Assist or Conmux attached the "cdba-server" executable is run
from sandbox/cdba/cdba-server. Available devices are read from $HOME/.cdba

= Client side
The client is invoked as:

  cdba -b <board> -h <host> [-c <power-cylce-count>] boot.img

<host> will be connected to using ssh and <board> will be selected for
operation. As the board's fastboot interface shows up the given boot.img will
be transfered and booted on the device.

The board will execute until the key sequence ^A q is invoked or the board
outputs a sequence of 20 ~ (tilde) chards in a row.

If the optional -c is given, the board will upon receiving the tilde sequence
restart the board the given number of times. Each time booting the given
boot.img.

== Device configuration
The list of attached devices is read from $HOME/.cdba and is YAML formatted.

== Custom reset sequence

For devices where power-control is nontrivial, a workaround is to use the soft-reset
feature built into the board, this usually involves pressing some button combination.
A custom reset sequence can be specified with the "reset_sequence" YAML key.

=== Example
devices:
  - board: db2k
    cdba: 00000001
    name: "DragonBoard2k"
    fastboot: abcdef1
    voltage: 8000

  - board: mtp2k
    conmux: mtp2k
    fastboot: abcdef2
    fastboot_set_active: true

  - board: evb2k
    console: /dev/ttyUSB0
    fastboot: abcdef3
    fastboot_set_active: true

  - board: qrd8550
    alpaca: /dev/serial/by-id/usb-QUALCOMM_Inc._Embedded_Power_Measurement__EPM__device_6E02020620151F14-if01
    console: /dev/serial/by-id/usb-QUALCOMM_MTP_Debug_Board_MT77TGG2-if00-port0
    name: QRD8550
    fastboot: 91671140
    fastboot_set_active: true
    fastboot_key_timeout: 2

  - board: sdm845-enchilada
    qcomlt_debug_board: /dev/serial/by-id/usb-postmarketOS_Test_Device_E6604430430-if00
    console: /dev/serial/by-id/usb-postmarketOS_Test_Device_E6604430430-if02
    name: "OnePlus 6"
    fastboot: 5725c671
    # Press power; sleep 10.5 seconds; press vol+; sleep 1 second; release power
    reset_sequence: "B;10500;R;0;b;0;"
